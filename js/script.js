function main(){var e=null;let t=!0;const n=document.querySelector(".register"),o=document.querySelector(".menu__button"),i=document.querySelector(".top__button"),a=document.querySelector(".register__close-button"),s=document.createElement("div"),c=document.querySelectorAll(".select-activity__menu_option"),r=document.querySelector(".select-container"),l=document.getElementById("select-activity"),d=document.querySelector(".select-activity__menu"),u=document.getElementById("register"),m=document.getElementById("name"),v=document.getElementById("email"),y=document.getElementById("select-activity");let p=document.querySelector(".menu-btn"),g=document.querySelector(".navigation");function f(t){e||(e=t);n.style.visibility="visible",scalePopupWindow=.5,n.style.transform="scale("+scalePopupWindow+")",requestAnimationFrame(L)}function L(){scalePopupWindow+=.05,n.style.transform="scale("+scalePopupWindow+")",scalePopupWindow<1&&t&&requestAnimationFrame(L)}function w(){t=!0;document.querySelector("input");scalePopupWindow-=.05,n.style.transform="scale("+scalePopupWindow+")",scalePopupWindow>.5?requestAnimationFrame(w):(n.style.visibility="hidden",n.classList.remove("fatal-error"),document.querySelectorAll("input").forEach(e=>e.value=""),document.getElementById("agreement").checked=!1,m.classList.remove("input-error"),v.classList.remove("input-error"),y.classList.remove("input-error"),1==t&&document.body.removeChild(s))}function E(){document.body.appendChild(s),document.body.style.overflow="hidden",window.requestAnimationFrame(f)}s.classList.add("overlay"),s.addEventListener("click",function(){document.body.style.overflow="",requestAnimationFrame(w)}),p.addEventListener("click",function(){g.classList.toggle("active"),p.classList.toggle("active")}),u.addEventListener("submit",function(e){e.preventDefault();const t=new FormData(u),o={name:t.get("name"),email:t.get("email"),activities:t.get("activities"),agreement:!!t.get("agreement")};(function(e){let t=!1;n=e.name,new RegExp("^[A-Za-zА-Яа-яЁёs]+$").test(n)?m.classList.remove("input-error"):(m.classList.add("input-error"),t=!0);var n;o=e.email,new RegExp("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,}$").test(o)?v.classList.remove("input-error"):(v.classList.add("input-error"),t=!0);var o;e.activities?y.classList.remove("input-error"):(y.classList.add("input-error"),t=!0);return!t})(o)&&async function(e){const t=new FormData;t.append("name",e.name),t.append("email",e.email),t.append("activities",e.activities),t.append("agreement",e.agreement);let o={method:"POST",body:t};try{const e=await fetch("saveSurvey.php",o);200!==e.status?(n.classList.add("fatal-error"),e.message="Directory does not exist",console.log("Error! "+e.status+" "+e.message)):(document.body.style.overflow="",requestAnimationFrame(w))}catch(e){console.log(e)}}(o)}),l.addEventListener("click",function(e){r.classList.toggle("expanded"),function(){const e=l.value;c.forEach(t=>{e===t.dataset.activity?t.classList.add("option__checked"):t.classList.remove("option__checked")})}()}),d.addEventListener("click",function(e){const t=e.target.dataset.activity;t&&(l.value=t),r.classList.remove("expanded")}),o.addEventListener("click",E),i.addEventListener("click",E),a.addEventListener("click",function(){document.body.style.overflow="",requestAnimationFrame(w)}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(document.body.style.overflow="",t=!1,requestAnimationFrame(w))})}window.onload=main;